# ACL (Access Control List) & NAT (Network Address Translation) Theory

This document summarizes two major IPv4 features: **Access Control Lists (ACLs)** for traffic filtering, and **Network Address Translation (NAT)** for enabling internet connectivity using private IP addresses.

---

## Part 1: Access Control Lists (ACL)

### What Is an ACL?
An **Access Control List (ACL)** is a list of filtering rules applied to router interfaces to **permit or deny** traffic based on criteria like source IP, destination IP, protocol, or port.

---

### Why Use ACLs?

- Enhance **network security**
- Filter **unwanted traffic**
- Limit **access to specific services**
- Control **routing updates**
- Restrict **remote access** via VTY

---

### ACL Types

| Type         | Filters By                      | Notes                              |
|--------------|----------------------------------|-------------------------------------|
| **Standard** | Source IP address only           | Simpler, use close to destination   |
| **Extended** | Source, destination, port, protocol | More powerful, placed near source  |

---

### ACL Syntax

#### 1. Numbered Standard ACL

```bash
access-list 1 permit 192.168.10.0 0.0.0.255
access-list 1 deny any

interface g0/1
 ip access-group 1 out
```

#### 2. Named Standard ACL

```bash
ip access-list standard ADMIN-MGT
 permit host 192.168.10.3
 permit 192.168.10.0 0.0.0.255
 deny any  # Optional

interface g0/1
 ip access-group ADMIN-MGT out
```

---

### ACL Directions

| Direction | Filters |
|-----------|---------|
| **Inbound**  | Before packet enters the router |
| **Outbound** | After routing decision, before leaving router |

---

### Wildcard Masks

Wildcard masks are **inverse subnet masks**.

| Mask Type     | Value             | Meaning                    |
|---------------|-------------------|----------------------------|
| Exact Match   | `0.0.0.0`         | Match all bits             |
| Match Any     | `255.255.255.255` | Ignore all bits            |
| Subnet Match  | `0.0.0.255`       | Match first 24 bits (e.g., /24) |

#### Example:
```bash
access-list 1 permit 192.168.1.0 0.0.0.255
```

---

### ACL Guidelines

- **Standard ACLs** go **near the destination**
- **Extended ACLs** go **near the source**
- Always end with a **permit any** if you want to allow unspecified traffic
- ACLs **do not filter traffic generated by the router itself**
- There is an **implicit deny all** at the end of every ACL

---

### Common ACL Show Commands

```bash
show access-lists
show ip interface g0/1
```

---

## Part 2: Network Address Translation (NAT)

### What Is NAT?

NAT allows private IPs to be translated into public IPs, enabling devices in a local network to access the internet securely.

---

### Why NAT Is Important

- Hides internal private addresses
- Allows multiple internal hosts to share fewer public IPs
- Prevents conflicts when overlapping private IPs exist across networks

---

### NAT Address Terminology

| Term             | Description                                  |
|------------------|----------------------------------------------|
| **Inside Local** | Private IP in local network                  |
| **Inside Global**| Public IP seen from the internet             |
| **Outside Local**| IP of external host as seen internally       |
| **Outside Global**| Real IP of the external host                |

---

### NAT Types

#### 1. **Static NAT**
One-to-one mapping between private and public IPs.

```bash
ip nat inside source static 192.168.10.10 203.0.113.5

interface g0/1
 ip nat inside

interface s0/0/1
 ip nat outside
```

---

#### 2. **Dynamic NAT**
Maps internal addresses to a pool of public IPs (limited by pool size).

```bash
access-list 1 permit 192.168.1.0 0.0.0.255
ip nat pool PUBLIC_POOL 203.0.113.5 203.0.113.10 netmask 255.255.255.248
ip nat inside source list 1 pool PUBLIC_POOL
```

---

#### 3. **PAT (Port Address Translation / NAT Overload)**
Maps many private IPs to **one** public IP using port numbers.

```bash
access-list 1 permit 192.168.1.0 0.0.0.255
ip nat inside source list 1 interface s0/0/1 overload
```

---

### NAT Configuration Summary

1. Define Inside & Outside Interfaces:
```bash
interface g0/1
 ip nat inside

interface s0/0/1
 ip nat outside
```

2. Create Access List for Local Network:
```bash
access-list 1 permit 192.168.1.0 0.0.0.255
```

3. Enable NAT (choose method: static, dynamic, PAT)

---

### NAT Show Commands

```bash
show ip nat translations     # See NAT mappings
show ip nat statistics       # Check usage stats
clear ip nat translation *   # Reset NAT table
```

---

## Summary

| Feature | ACL | NAT |
|--------|-----|-----|
| Purpose | Filter traffic | Enable internet access |
| Control | Source IP / Protocols | IP translation |
| Location | On router interfaces | Usually border router |
| Tools | Access list, wildcard | NAT pool, interface roles |
| Security Use | Block traffic | Hide internal IPs |

